# Production Moodle Migration Configuration
# Copy this file to .env.prod-migration and fill in your production server details
#
# MIGRATION WORKFLOWS:
#
# === Option 1: Direct Migration with pgloader (RECOMMENDED) ===
# Uses pgloader to migrate directly from production MariaDB to local PostgreSQL
# Automatically handles type conversions, indexes, and constraints.
#
# 1. Configure this file with production credentials
# 2. Run: docker compose up -d (start PostgreSQL)
# 3. Run: ./run-migration.sh (migrates database via SSH tunnel)
#
# === Option 2: SQL Dump Migration (For sampling/anonymization) ===
# Creates a SQL dump with sample data and anonymized users.
#
# 1. Configure this file with production credentials
# 2. Run: ./create-dev-sql-dump.sh (creates sampled/anonymized dump)
# 3. Run: ./prepare-migration.sh (converts to PostgreSQL format)
# 4. Run: docker compose down -v && docker compose up -d (reloads database)

# --- Remote SSH & DB Credentials (REQUIRED) ---
# SSH credentials for connecting to production server
PROD_SSH_USER=root
PROD_SSH_HOST=10.10.68.215

# Database credentials on production server
PROD_DB_USER=root
PROD_DB_PASS=your_database_password
PROD_DB_NAME=moodle_production

# Production database port (usually 3306 for MariaDB/MySQL)
# PROD_DB_PORT=3306

# Path to mariadb-dump command on production server (optional, for SQL dump method)
# PROD_MARIADB_DUMP_CMD=mariadb-dump

# Local port for SSH tunnel (optional, for pgloader method)
# LOCAL_TUNNEL_PORT=13306

# --- Migration Settings (OPTIONAL) ---
# Output SQL file name
# OUTPUT_SQL_FILE=dev_migration.sql

# Number of courses to migrate from production
# COURSE_SAMPLE_SIZE=5

# Password for all users in the development environment
# DEV_USER_PASSWORD=Password123!

# Moodle table prefix (usually mdl_)
# PREFIX=mdl_
